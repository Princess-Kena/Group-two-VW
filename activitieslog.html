<!DOCTYPE html>
<html>

<head>
  <title></title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/styles.css">

</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light main-navbar">
    <div class="container">
      <a class="navbar-brand" href="#">
        <img class="logo" src="images/vw.png">
        <span style="color: whitesmoke;">VolksWagen Ghana</span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent you">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="partsreceived.html">Parts Received</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="seeallocatedparts.html">Allocated Parts</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="allunallocatedparts.html">Unallocated Parts</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="incomingrequest.html">Part Requests</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="activitieslog.html">Log</a>
              </li>
            <li class="nav-item">
              <a class="nav-link" href="recyclebin.html">Bin</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">Logout</a>
            </li>
          </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="row">
      <div class="col text-uppercase"style="margin-top: 30px;">
        <h5>ACTIVITIES LOG</h5>
      </div>
      </div>
    </div>
    <table class="table table-striped">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Activity Type</th>
          <th scope="col">Part Name</th>
          <th scope="col">Date</th>
          <th scope="col">Time</th>
          <th scope="col">Amount</th>
          <th scope="col">Batch No.</th>
          <th scope="col">Quantity</th>
          <th scope="col">Branch</th>
          <th scope="col">User</th>

        </tr>
      </thead>
      <tbody id="avtivitiesLog">
        <tr>
            <th scope="row">1</th>
            <td>Restored</td>
            <td>Mirror</td>
            <td>02-03-20</td>
            <td>08:40pm</td>
            <td>50</td>
            <td>657486</td>
            <td>67</td>
            <td>Labadi</td>
            <td>Sena Jones</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>Deleted</td>
            <td>Engine</td>
            <td>03-03-20</td>
            <td>08:40pm</td>
            <td>50</td>
            <td>657482</td>
            <td>67</td>
            <td>Labadi</td>
            <td>Sena Jones</td>
          </tr>
          <tr>
            <th scope="row">3</th>
            <td>Reallocated</td>
            <td>Bumper</td>
            <td>08-10-20</td>
            <td>12:40pm</td>
            <td>12</td>
            <td>657490</td>
            <td>63</td>
            <td>Amasaman</td>
            <td>David Osei</td>
          </tr>
          <tr>
            <th scope="row">4</th>
            <td>Unallocated</td>
            <td>Tyre</td>
            <td>03-11-20</td>
            <td>03:52pm</td>
            <td>100</td>
            <td>657488</td>
            <td>80</td>
            <td>Lapaz</td>
            <td>Sena Jones</td>
          </tr>
          <tr>
            <th scope="row">5</th>
            <td>Deleted</td>
            <td>Gear</td>
            <td>03-03-20</td>
            <td>08:40pm</td>
            <td>50</td>
            <td>657445</td>
            <td>67</td>
            <td>Labadi</td>
            <td>Sena Jones</td>
          </tr>
          <tr>
            <th scope="row">6</th>
            <td>Restored</td>
            <td>Sterring</td>
            <td>23-01-20</td>
            <td>09:40am</td>
            <td>120</td>
            <td>657489</td>
            <td>67</td>
            <td>Tema</td>
            <td>Kim Bill</td>
          </tr>
          <tr>
            <th scope="row">7</th>
            <td>Deleted</td>
            <td>Seat</td>
            <td>02-02-20</td>
            <td>08:40pm</td>
            <td>60</td>
            <td>657445</td>
            <td>82</td>
            <td>Pokuase</td>
            <td>Martin Lord</td>
          </tr>
          <tr>
            <th scope="row">8 </th>
            <td>Deleted</td>
            <td>Bonnet</td>
            <td>03-05-20</td>
            <td>08:02pm</td>
            <td>90</td>
            <td>657480</td>
            <td>60</td>
            <td>Kasoa</td>
            <td>Sena Jones</td>
          </tr>

       
      </tbody>
    </table>
  </div>


  <script type="text/javascript" src="js/jquery-3.5.1.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
   <!-- The core Firebase JS SDK is always required and must be listed first -->
 <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>


 <!-- TODO: Add SDKs for Firebase products that you want to use
      https://firebase.google.com/docs/web/setup#available-libraries -->
      <script
 src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
 
 <script>
   // Your web app's Firebase configuration
   var firebaseConfig = {
     apiKey: "AIzaSyAywSdzavg5I7JD3egu1oqwYxitN_IK_Gs",
     authDomain: "vw-inbound-app.firebaseapp.com",
     databaseURL: "https://vw-inbound-app.firebaseio.com",
     projectId: "vw-inbound-app",
     storageBucket: "vw-inbound-app.appspot.com",
     messagingSenderId: "685701408641",
     appId: "1:685701408641:web:a3c3300165858c47f7aa80"
   };
   // Initialize Firebase
   firebase.initializeApp(firebaseConfig);
 </script>
  
 <script>
   var db = firebase.firestore();

   function getAllocatedParts() {
            var partsTable = document.getElementById('activitiesLog');
            db.collection("allocatedrecords").onSnapshot((querySnapshot) => {
              let num = 0;
              partsTable.innerHTML = '';
                querySnapshot.forEach((doc,i) => {
                    // console.log(`${doc.id} => ${doc.data().projectName}`);
                    let data = doc.data();
                    console.log(data);
                    let newRow = `
                    <tr>
                        <th scope="row">${++num}</th>
                        <td>${data.activitiesType}</td>
                        <td>${data.partName}</td>
                        <td>${data.date}</td>
                        <td>${data.time}</td>
                        <td>${data.amount}</td>
                        <td>${data.batchNumber}</td>
                        <td>${data.quantity}</td>
                        <td>${data.branch}</td>
                        <td>${data.user}</td>
                      </tr>
                    `
                    partsTable.innerHTML = partsTable.innerHTML + newRow
                });
            });
        }

        function deletePart(id) {
            db.collection("allocatedrecords").doc(id).delete().then(function () {
                console.log("Document successfully deleted!");
                // window.location.href  =  window.location.href 
            }).catch(function (error) {
                console.error("Error removing document: ", error);
            });
        }
        // getAllocatedParts()
   </script>


</body>

</html>